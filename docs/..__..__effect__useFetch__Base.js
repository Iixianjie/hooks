(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"2dX0":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("q1tI");function r(e,t){var n=Object(a["useRef"])(()=>{throw new Error("Cannot call function while rendering")});n.current=e;var r=Object(a["useMemo"])(()=>{var e=function(){return n.current(...arguments)};return t?t(e):e},[]),c=Object(a["useCallback"])(r,[n]);return c}},"32Fv":function(e,t,n){"use strict";n.r(t);var a=n("tJVT"),r=n("q1tI"),c=n.n(r),o=n("34YR");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return function(){return new Promise((a,r)=>{setTimeout(()=>{t?a(n||e):r(n||e)},e)})}}var u=()=>{var e=Object(r["useState"])(0),t=Object(a["a"])(e,2),n=t[0],u=t[1],l=Object(r["useState"])(!1),s=Object(a["a"])(l,2),d=s[0],m=s[1],v=Object(r["useState"])(!1),b=Object(a["a"])(v,2),f=b[0],O=b[1],p=Object(r["useState"])(!1),g=Object(a["a"])(p,2),j=g[0],E=g[1],h=Object(o["a"])(i(f?5e3:1e3,!d,{name:"lxj",bd:"1994-08",timer:Date.now()}),{initPayload:{score:Math.random().toFixed(2)},deps:[n],timeout:3e3,pollingInterval:j?2e3:0,cacheKey:"USEFETCHCHACHEKEY"}),y=h.data,C=h.loading,S=h.error,T=h.timeout,I=h.send,w=h.payload,k=h.cancel,D=c.a.createElement("span",{onClick:I,style:{color:"#1561c4",fontSize:14}},"\u91cd\u8bd5");return c.a.createElement("div",null,c.a.createElement("div",{style:{marginBottom:12}},c.a.createElement("button",{onClick:I},"\u901a\u8fc7send\u8fdb\u884c\u66f4\u65b0"),c.a.createElement("button",{onClick:()=>I({score:Math.random().toFixed(2)})},"send\u4f20\u5165payload\u8fdb\u884c\u66f4\u65b0"),c.a.createElement("button",{onClick:()=>u(e=>e+1)},"\u901a\u8fc7\u6539\u53d8deps\u66f4\u65b0 ",n)),c.a.createElement("div",{style:{marginBottom:12}},c.a.createElement("button",{onClick:()=>m(e=>!e)},"\u4e0b\u6b21\u4e3a\u9519\u8bef\u8bf7\u6c42 ",d.toString()),c.a.createElement("button",{onClick:()=>O(e=>!e)},"\u4e0b\u6b21\u4e3a\u8d85\u65f6\u8bf7\u6c42 ",f.toString())),c.a.createElement("div",{style:{marginBottom:24}},c.a.createElement("button",{onClick:()=>E(e=>!e)},"\u8f6e\u8be2\u5f00\u5173 ",j.toString()),c.a.createElement("button",{onClick:k},"\u53d6\u6d88\u8be5\u6b21\u8bf7\u6c42")),c.a.createElement("div",null,c.a.createElement("strong",null,"data:")," ",c.a.createElement("div",null,JSON.stringify(y,null,4))),c.a.createElement("div",null,c.a.createElement("strong",null,"loading:")," ",C&&c.a.createElement("span",null,"\u23f1loading...")),c.a.createElement("div",null,c.a.createElement("strong",null,"error:"),S&&c.a.createElement("div",null,JSON.stringify(S)," ",D)),c.a.createElement("div",null,c.a.createElement("strong",null,"timeout:")," ",T&&c.a.createElement("span",null,"timeout",D)),c.a.createElement("div",null,c.a.createElement("strong",null,"payload"),c.a.createElement("span",{style:{fontSize:14}},"(\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9\u8bf7\u6c42\u65b9\u6cd5)"),":",JSON.stringify(w)),c.a.createElement("p",{style:{fontSize:14,color:"rgba(0,0,0,0.45)"}},'* \u5f53\u4f20\u5165\u4e86 cacheKey \u540e\uff0c\u4f1a\u81ea\u52a8\u5f00\u542fSWR(stale-while-revalidate)\uff0c\u5f53arg\u3001data\u3001payload\u53d1\u751f\u53d8\u66f4\u65f6\u4f1a\u5c06\u5176\u7f13\u5b58\u5230session\u4e2d\uff0c \u4e0b\u6b21\u7ec4\u4ef6\u521d\u59cb\u5316\u65f6\uff0c\u4f1a\u5148\u8bfb\u53d6\u7f13\u5b58\u6570\u636e\u8fdb\u884c\u8fd4\u56de\uff0c\u7136\u540e\u518d\u53d1\u8d77\u66f4\u65b0\u8bf7\u6c42\u5e76\u66ff\u6362\u6389"stale"\u7684\u6570\u636e\uff0c',c.a.createElement("span",{style:{color:"rgba(0,0,0,0.75)"}},"\u5237\u65b0\u9875\u9762\u5e76\u67e5\u770bdata\u7684\u53d8\u5316\u6765\u67e5\u770bSWR\u7684\u6548\u679c")),c.a.createElement("p",{style:{fontSize:14,color:"rgba(0,0,0,0.45)"}},"* \u7ade\u6001?, \u4e0e\u901a\u5e38\u610f\u4e49\u4e0a\u7684\u7ade\u6001\u7a0d\u6709\u4e0d\u540c\uff08Promise.race\u7b49\uff09\uff0c\u4f7f\u7528useFetch\u65f6\uff0c\u540e\u53d1\u8d77\u7684\u8bf7\u6c42\u4f1a\u8986\u76d6\u6389\u5148\u53d1\u8d77\u7684\u8bf7\u6c42, \u5373\u4f7f\u8be5\u8bf7\u6c42\u53d1\u751f\u4e86\u9519\u8bef\u6216\u5176\u4ed6\u5f02\u5e38"))};t["default"]=u},"34YR":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("WmNS"),r=n.n(a),c=n("k1fw"),o=n("9og8"),i=n("tJVT"),u=n("K3qG"),l=n("sEfC"),s=n.n(l),d=n("DzJC"),m=n.n(d),v=n("q1tI"),b=n("W3VL"),f=n("4H9c"),O=n("xQ7e"),p=n("d3U/"),g=n("2dX0"),j=u["a"];function E(e){return!!e&&!!(Object(u["h"])(e)&&"nativeEvent"in e&&"target"in e&&"type"in e)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(b["a"])({fetchID:0,fetchCount:0,timeoutTimer:0,lastFetch:Date.now()}),a=t.initData,l=t.initPayload,d=t.deps,h=void 0===d?[]:d,y=t.param,C=t.manual,S=void 0!==C&&C,T=t.timeout,I=void 0===T?1e4:T,w=t.onSuccess,k=t.onError,D=t.onComplete,F=t.onTimeout,J=t.cacheKey,x=t.stale,q=void 0===x||x,_=t.throttleInterval,H=t.debounceInterval,R=t.pollingInterval,A=!!J,P=Object(f["a"])({loading:!S&&Object(u["f"])(e),error:void 0,timeout:!1}),U=Object(i["a"])(P,2),K=U[0],N=U[1];Object(v["useEffect"])(()=>()=>{n.fetchID=0,n.timeoutTimer&&j.clearTimeout(n.timeoutTimer)},[]);var V=Object(O["a"])("".concat(J,"_FETCH_PAYLOAD"),l,{disabled:!A}),z=Object(i["a"])(V,2),W=z[0],L=z[1],M=Object(O["a"])("".concat(J,"_FETCH_DATA"),a,{disabled:!A}),X=Object(i["a"])(M,2),Y=X[0],B=X[1],G=Object(v["useState"])(!0),Q=Object(i["a"])(G,2),Z=Q[0],$=Q[1],ee=Object(g["a"])(function(){var t=Object(o["a"])(r.a.mark((function t(a){var o,i,l,s,d,m=arguments;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=m.length>1&&void 0!==m[1]&&m[1],i=Object(u["f"])(e),i){t.next=4;break}return t.abrupt("return");case 4:return n.lastFetch=Date.now(),l=Math.random(),n.fetchID=l,n.timeoutTimer&&j.clearTimeout(n.timeoutTimer),n.timeoutTimer=j.setTimeout(()=>{re(),null===F||void 0===F||F(),N(Object(c["a"])({},ae("timeout",!0)))},I),s=n.timeoutTimer,K.loading||N(Object(c["a"])({},ae("loading",!0))),t.prev=11,t.next=14,e(a);case 14:if(d=t.sent,l===n.fetchID){t.next=17;break}return t.abrupt("return");case 17:return N(Object(c["a"])({},ae("loading",!1))),B(d),null===w||void 0===w||w(d,o),t.abrupt("return",[void 0,d]);case 23:if(t.prev=23,t.t0=t["catch"](11),l===n.fetchID){t.next=27;break}return t.abrupt("return");case 27:return N(Object(c["a"])({},ae("error",t.t0))),null===k||void 0===k||k(t.t0),t.abrupt("return",[t.t0,void 0]);case 30:if(t.prev=30,s&&j.clearTimeout(s),l===n.fetchID){t.next=34;break}return t.abrupt("return");case 34:return null===D||void 0===D||D(),n.fetchCount++,t.finish(30);case 37:case"end":return t.stop()}}),t,null,[[11,23,30,37]])})));function a(e){return t.apply(this,arguments)}return a}(),e=>_?m()(e,_,{trailing:!1}):H?s()(e,H):e),te=Object(g["a"])(e=>{var t=E(e)||void 0===e;return ee(ne(e),t)});function ne(e){return"param"in t?y:E(e)||void 0===e?W:(L(e),e)}function ae(e,t){var n={loading:!1,error:void 0,timeout:!1};return e&&(n[e]=t),n}function re(){n.fetchID=0,n.timeoutTimer&&j.clearTimeout(n.timeoutTimer),N({loading:!1})}return Object(p["a"])(()=>{"param"in t&&(0===n.fetchCount||S||ee(ne(),!1))},[y]),Object(v["useEffect"])(()=>{S||(q||0!==n.fetchCount||Object(u["e"])(Y)?ee(ne(),0!==n.fetchCount):N({loading:!1}))},[...h]),Object(v["useEffect"])((function(){var e;return Z&&R&&R>500&&(e=j.setInterval(()=>{var e=Date.now(),t=n.lastFetch,a=e-t>=R;a&&te()},R)),()=>{e&&clearInterval(e)}}),[R,Z]),Object(c["a"])({},K,{send:te,data:Y,payload:W,param:y,setData:B,cancel:re,polling:Z,setPolling:$})}},"4H9c":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("tJVT"),r=n("q1tI"),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r["useState"])(0),n=Object(a["a"])(t,2),c=n[1],o=Object(r["useState"])(e),i=Object(a["a"])(o,2),u=i[0],l=i[1],s=Object(r["useCallback"])(e=>{l(Object.assign(u,e instanceof Function?e(u):e)),c(e=>e+1)},[l]);return[u,s]}},W3VL:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("q1tI");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a["useRef"])(e);return t.current}},"d3U/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("q1tI"),r=n("tLXD"),c=n("tq0P"),o=n.n(c);function i(e,t,n){var c=Object(r["a"])(t),i=Object(a["useRef"])(0),u=o()(t,c,n);u||i.current++,Object(a["useEffect"])(e,[i.current])}},xQ7e:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("tJVT"),r=n("k1fw"),c=n("K3qG"),o=n("q1tI"),i=n("2dX0"),u="USE_STORAGE_CACHE",l={local:c["a"].localStorage,session:c["a"].sessionStorage};function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"session";if(void 0!==t){var a=l[n];a&&a.setItem("".concat(u,"_").concat(e.toUpperCase()),JSON.stringify(t))}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"session",n=l[t];if(n){var a=n.getItem("".concat(u,"_").concat(e.toUpperCase()));return null===a?a:JSON.parse(a)}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"session",n=l[t];n&&n.removeItem("".concat(u,"_").concat(e.toUpperCase()))}var v={type:"session",disabled:!1};function b(e,t,n){var c=Object(r["a"])({},v,{},n),u=Object(o["useState"])(()=>{if(!c.disabled){var n=d(e,c.type);if(null!==n)return n}if(t instanceof Function){var a=t();return!c.disabled&&s(e,a,c.type),a}return!c.disabled&&s(e,t,c.type),t}),l=Object(a["a"])(u,2),m=l[0],b=l[1],f=Object(i["a"])(t=>{t instanceof Function?b(n=>{var a=t(n);return!c.disabled&&s(e,a,c.type),a}):(!c.disabled&&s(e,t,c.type),b(t))});return[m,f]}var f=Object.assign(b,{get:d,set:s,remove:m})}}]);