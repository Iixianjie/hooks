(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31,30],{"0Owb":function(n,a,s){"use strict";function t(){return t=Object.assign||function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}return n},t.apply(this,arguments)}s.d(a,"a",(function(){return t}))},"4H9c":function(n,a,s){"use strict";s.d(a,"a",(function(){return p}));var t=s("tJVT"),e=s("q1tI"),p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(e["useState"])(0),s=Object(t["a"])(a,2),p=s[1],c=Object(e["useState"])(n),o=Object(t["a"])(c,2),l=o[0],u=o[1],r=Object(e["useCallback"])(n=>{u(Object.assign(l,n instanceof Function?n(l):n)),p(n=>n+1)},[u]);return[l,r]}},MPfB:function(n,a,s){"use strict";s.r(a);var t=s("0Owb"),e=s("q1tI"),p=s.n(e),c=(s("B2uJ"),s("5Yjd")),o=s.n(c),l=p.a.memo((function(){var n=t(s("q1tI")),a=t(s("fh59"));function t(n){return n&&n.__esModule?n:{default:n}}var e=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(e)}));a["default"]=function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"markdown"},p.a.createElement("h1",{id:"usesetstate"},p.a.createElement("a",{"aria-hidden":"true",href:"#usesetstate"},p.a.createElement("span",{className:"icon icon-link"})),"useSetState"),p.a.createElement("p",null,"\u63d0\u4f9b\u4e0e\u7c7b\u7ec4\u4ef6setState\u7c7b\u4f3c\u7684API"),p.a.createElement("h2",{id:"\u793a\u4f8b"},p.a.createElement("a",{"aria-hidden":"true",href:"#\u793a\u4f8b"},p.a.createElement("span",{className:"icon icon-link"})),"\u793a\u4f8b")),p.a.createElement(o.a,Object(t["a"])({source:{raw:"import React from 'react';\r\n\r\nimport { useSetState } from './useSetState';\r\n\r\nconst UseSetStateDemo = () => {\r\n  const [state, setState] = useSetState({ count: 0, other: 'lxj' });\r\n\r\n  const clickHandle = React.useCallback(() => {\r\n    setState({ count: state.count + 1 });\r\n    // setState(prev => ({ count: prev.count + 1 }); \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\u8fbe\u5230\u7684\u6548\u679c\u51e0\u4e4e\u662f\u4e00\u81f4\u7684\r\n\r\n    // \u7531\u4e8estate\u5f15\u7528\u59cb\u7ec8\u76f8\u540c\uff0c\u6240\u4ee5\u5728setState\u540e\u53ef\u4ee5\u7acb\u5373\u83b7\u53d6\u5230\u6700\u65b0\u7684\u72b6\u6001, \u5728useEffect\u3001useCallback\u7b49\u95ed\u5305\u73af\u5883\u4e2d\u53ef\u901a\u8fc7state\u83b7\u53d6\u5230\u6700\u65b0\u72b6\u6001\r\n    console.log(state);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div>{JSON.stringify(state)}</div>\r\n      <br />\r\n      <button onClick={clickHandle}>add {state.count}</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UseSetStateDemo;\r\n",jsx:'<pre class="language-jsx"><code class="language-jsx"><span class="token keyword module">import</span> <span class="token maybe-class-name">React</span> <span class="token keyword module">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword module">import</span> <span class="token punctuation">{</span> useSetState <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">\'./useSetState\'</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">UseSetStateDemo</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSetState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\r\n    count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\r\n    other<span class="token punctuation">:</span> <span class="token string">\'lxj\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token keyword">const</span> clickHandle <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\r\n    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\r\n      count<span class="token punctuation">:</span> state<span class="token punctuation">.</span><span class="token property-access">count</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>\r\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// setState(prev => ({ count: prev.count + 1 }); \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\u8fbe\u5230\u7684\u6548\u679c\u51e0\u4e4e\u662f\u4e00\u81f4\u7684</span>\r\n    <span class="token comment">// \u7531\u4e8estate\u5f15\u7528\u59cb\u7ec8\u76f8\u540c\uff0c\u6240\u4ee5\u5728setState\u540e\u53ef\u4ee5\u7acb\u5373\u83b7\u53d6\u5230\u6700\u65b0\u7684\u72b6\u6001, \u5728useEffect\u3001useCallback\u7b49\u95ed\u5305\u73af\u5883\u4e2d\u53ef\u901a\u8fc7state\u83b7\u53d6\u5230\u6700\u65b0\u72b6\u6001</span>\r\n\r\n    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>br</span> <span class="token punctuation">/></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>clickHandle<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">add </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>\r\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">UseSetStateDemo</span><span class="token punctuation">;</span>\r\n\n</code></pre>',tsx:'<pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token maybe-class-name">React</span> <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">import</span> <span class="token punctuation">{</span> useSetState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'./useSetState\'</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">UseSetStateDemo</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSetState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token string">\'lxj\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n  <span class="token keyword">const</span> clickHandle <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\r\n    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> state<span class="token punctuation">.</span><span class="token property-access">count</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n    <span class="token comment">// setState(prev => ({ count: prev.count + 1 }); \u4e24\u79cd\u4f7f\u7528\u65b9\u5f0f\u8fbe\u5230\u7684\u6548\u679c\u51e0\u4e4e\u662f\u4e00\u81f4\u7684</span>\r\n\r\n    <span class="token comment">// \u7531\u4e8estate\u5f15\u7528\u59cb\u7ec8\u76f8\u540c\uff0c\u6240\u4ee5\u5728setState\u540e\u53ef\u4ee5\u7acb\u5373\u83b7\u53d6\u5230\u6700\u65b0\u7684\u72b6\u6001, \u5728useEffect\u3001useCallback\u7b49\u95ed\u5305\u73af\u5883\u4e2d\u53ef\u901a\u8fc7state\u83b7\u53d6\u5230\u6700\u65b0\u72b6\u6001</span>\r\n    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>br</span> <span class="token punctuation">/></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>clickHandle<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">add </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>\r\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token maybe-class-name">UseSetStateDemo</span><span class="token punctuation">;</span>\r\n\n</code></pre>'}},{path:"/_demos/use-set-state.demo",dependencies:{}}),p.a.createElement(l,null)),p.a.createElement("div",{className:"markdown"},p.a.createElement("h2",{id:"api"},p.a.createElement("a",{"aria-hidden":"true",href:"#api"},p.a.createElement("span",{className:"icon icon-link"})),"API"),p.a.createElement("p",null,p.a.createElement("code",null,"const [state, setState] = useSetState(initState)")),p.a.createElement("p",null,p.a.createElement("strong",null,"state")," - ",p.a.createElement("code",null,"{}")," | state\u5bf9\u8c61\uff0c\u6bcf\u6b21rerender\u90fd\u8fd4\u56de\u7684\u662f\u540c\u4e00\u4e2a\u5bf9\u8c61\u5f15\u7528\uff0c\u53ef\u4ee5\u501f\u6b64\u6765\u89e3\u51b3\u4f7f\u7528hooks\u65f6\u5e38\u89c1\u7684\u95ed\u5305\u95ee\u9898"),p.a.createElement("p",null,p.a.createElement("strong",null,"setState")," - \u66f4\u6539state\u7684\u552f\u4e00\u65b9\u5f0f"),p.a.createElement("pre",{className:"language-ts"},p.a.createElement("code",{className:"language-ts"},p.a.createElement("span",{className:"token keyword"},"interface")," ",p.a.createElement("span",{className:"token class-name"},"SetState"),p.a.createElement("span",{className:"token operator"},"<"),p.a.createElement("span",{className:"token constant"},"T"),p.a.createElement("span",{className:"token operator"},">")," ",p.a.createElement("span",{className:"token punctuation"},"{"),p.a.createElement("br",null),"  ",p.a.createElement("span",{className:"token punctuation"},"("),"patch",p.a.createElement("span",{className:"token punctuation"},":")," ",p.a.createElement("span",{className:"token maybe-class-name"},"Partial"),p.a.createElement("span",{className:"token operator"},"<"),p.a.createElement("span",{className:"token constant"},"T"),p.a.createElement("span",{className:"token operator"},">")," ",p.a.createElement("span",{className:"token operator"},"|")," ",p.a.createElement("span",{className:"token punctuation"},"("),p.a.createElement("span",{className:"token punctuation"},"("),p.a.createElement("span",{className:"token parameter"},"prevState",p.a.createElement("span",{className:"token punctuation"},":")," ",p.a.createElement("span",{className:"token constant"},"T")),p.a.createElement("span",{className:"token punctuation"},")")," ",p.a.createElement("span",{className:"token arrow operator"},"=>")," ",p.a.createElement("span",{className:"token maybe-class-name"},"Partial"),p.a.createElement("span",{className:"token operator"},"<"),p.a.createElement("span",{className:"token constant"},"T"),p.a.createElement("span",{className:"token operator"},">"),p.a.createElement("span",{className:"token punctuation"},")"),p.a.createElement("span",{className:"token punctuation"},")"),p.a.createElement("span",{className:"token punctuation"},":")," ",p.a.createElement("span",{className:"token keyword"},"void"),p.a.createElement("span",{className:"token punctuation"},";"),p.a.createElement("br",null),p.a.createElement("span",{className:"token punctuation"},"}"),p.a.createElement("br",null))),p.a.createElement("p",null,p.a.createElement("strong",null,"initState")," - \u521d\u59cbstate"),p.a.createElement("pre",{className:"language-ts"},p.a.createElement("code",{className:"language-ts"},p.a.createElement("span",{className:"token keyword"},"type")," ",p.a.createElement("span",{className:"token maybe-class-name"},"SetStateInitState"),p.a.createElement("span",{className:"token operator"},"<"),p.a.createElement("span",{className:"token constant"},"T"),p.a.createElement("span",{className:"token operator"},">")," ",p.a.createElement("span",{className:"token operator"},"=")," ",p.a.createElement("span",{className:"token punctuation"},"("),p.a.createElement("span",{className:"token punctuation"},"("),p.a.createElement("span",{className:"token punctuation"},")")," ",p.a.createElement("span",{className:"token arrow operator"},"=>")," ",p.a.createElement("span",{className:"token constant"},"T"),p.a.createElement("span",{className:"token punctuation"},")")," ",p.a.createElement("span",{className:"token operator"},"|")," ",p.a.createElement("span",{className:"token constant"},"T"),p.a.createElement("span",{className:"token punctuation"},";"),p.a.createElement("br",null)))))}},fh59:function(n,a,s){"use strict";s.r(a);var t=s("tJVT"),e=s("q1tI"),p=s.n(e),c=s("4H9c"),o=()=>{var n=Object(c["a"])({count:0,other:"lxj"}),a=Object(t["a"])(n,2),s=a[0],e=a[1],o=p.a.useCallback(()=>{e({count:s.count+1}),console.log(s)},[]);return p.a.createElement("div",null,p.a.createElement("div",null,JSON.stringify(s)),p.a.createElement("br",null),p.a.createElement("button",{onClick:o},"add ",s.count))};a["default"]=o},tJVT:function(n,a,s){"use strict";function t(n){if(Array.isArray(n))return n}function e(n,a){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)){var s=[],t=!0,e=!1,p=void 0;try{for(var c,o=n[Symbol.iterator]();!(t=(c=o.next()).done);t=!0)if(s.push(c.value),a&&s.length===a)break}catch(l){e=!0,p=l}finally{try{t||null==o["return"]||o["return"]()}finally{if(e)throw p}}return s}}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(n,a){return t(n)||e(n,a)||p()}s.d(a,"a",(function(){return c}))}}]);