(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24,23],{"/m/O":function(n,a,s){"use strict";s.r(a);var t=s("0Owb"),p=s("q1tI"),e=s.n(p),o=(s("B2uJ"),s("5Yjd")),c=s.n(o),u=e.a.memo((function(){var n=t(s("q1tI")),a=t(s("JWph"));function t(n){return n&&n.__esModule?n:{default:n}}var p=function(){return n["default"].createElement(a["default"],null)};return n["default"].createElement(p)}));a["default"]=function(){return e.a.createElement(e.a.Fragment,null,e.a.createElement("div",{className:"markdown"},e.a.createElement("h1",{id:"usederivedstatefromprops"},e.a.createElement("a",{"aria-hidden":"true",href:"#usederivedstatefromprops"},e.a.createElement("span",{className:"icon icon-link"})),"useDerivedStateFromProps"),e.a.createElement("p",null,"\u5b9e\u73b0\u7c7b\u4f3c getDerivedStateFromProps \u7684\u6548\u679c\uff0c\u63a5\u6536 prop \u5e76\u5c06\u5176\u540c\u6b65\u4e3a\u5185\u90e8\u72b6\u6001\uff0c"),e.a.createElement("p",null,"\ud83d\udca1 \u5f53 prop \u6539\u53d8, \u5bf9 prop \u548c\u5185\u90e8 state \u6267\u884c",e.a.createElement("code",null,"_.isEqual"),",\u5bf9\u6bd4\u7ed3\u679c\u4e3a ",e.a.createElement("code",null,"false")," \u65f6\uff0c\u4f1a\u66f4\u65b0\u5185\u90e8\u503c (\u57fa\u7840\u7c7b\u578b\u4f7f\u7528 === \u8fdb\u884c\u5bf9\u6bd4\uff0c\u6027\u80fd\u66f4\u9ad8\uff0c\u5f53\u5fc5\u987b\u4f7f\u7528\u5f15\u7528\u7c7b\u578b\u65f6\uff0c\u5c3d\u91cf\u4fdd\u6301\u7ed3\u6784\u7b80\u5355\uff0c\u51cf\u5c11\u5bf9\u6bd4\u6b21\u6570)"),e.a.createElement("h2",{id:"\u793a\u4f8b"},e.a.createElement("a",{"aria-hidden":"true",href:"#\u793a\u4f8b"},e.a.createElement("span",{className:"icon icon-link"})),"\u793a\u4f8b")),e.a.createElement(c.a,Object(t["a"])({source:{raw:"import React, { useState } from 'react';\r\nimport { useDerivedStateFromProps } from './useDerivedStateFromProps';\r\n\r\nfunction Demo({ num }: any) {\r\n  const [insideNum, setInsideNum] = useDerivedStateFromProps(num);\r\n\r\n  return (\r\n    <div style={{ margin: '20px 0' }}>\r\n      <h3>\u57fa\u672c\u7c7b\u578b - </h3>\r\n      <div>\u4f20\u5165prop: {num}</div>\r\n      <div>\u6d3e\u751fstate: {insideNum}</div>\r\n      <button onClick={() => setInsideNum(Math.random)}>\u6539\u53d8\u6d3e\u751f\u72b6\u6001</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Demo2({ obj }: any) {\r\n  const [insideObj, setInsideObj] = useDerivedStateFromProps(obj);\r\n\r\n  return (\r\n    <div style={{ margin: '20px 0' }}>\r\n      <h3>\u5f15\u7528\u7c7b\u578b - </h3>\r\n      <div>\u4f20\u5165prop: {JSON.stringify(obj, null, 4)}</div>\r\n      <div>\u6d3e\u751fstate: {JSON.stringify(insideObj, null, 4)}</div>\r\n      <button onClick={() => setInsideObj({ id: 1008 })}>\u6539\u53d8\u6d3e\u751f\u72b6\u6001</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useDerivedStateFromPropsDemo = () => {\r\n  const [number, setNumber] = useState(5);\r\n  const [obj, setObj] = useState({ id: 2008 });\r\n\r\n  return (\r\n    <div>\r\n      <button onClick={() => setNumber(Math.random())}>\u6539\u53d8prop</button>\r\n      <div>\r\n        <Demo num={number} />\r\n      </div>\r\n\r\n      <hr />\r\n\r\n      <button onClick={() => setObj({ id: Math.random() })}>\u6539\u53d8\u5f15\u7528</button>\r\n      <div>\r\n        <Demo2 obj={obj} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default useDerivedStateFromPropsDemo;\r\n",jsx:'<pre class="language-jsx"><code class="language-jsx"><span class="token keyword module">import</span> <span class="token maybe-class-name">React</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword module">import</span> <span class="token punctuation">{</span> useDerivedStateFromProps <span class="token punctuation">}</span> <span class="token keyword module">from</span> <span class="token string">\'./useDerivedStateFromProps\'</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Demo</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> num <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>insideNum<span class="token punctuation">,</span> setInsideNum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDerivedStateFromProps</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span>\r\n      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\r\n        margin<span class="token punctuation">:</span> <span class="token string">\'20px 0\'</span><span class="token punctuation">,</span>\r\n      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\r\n    <span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">\u57fa\u672c\u7c7b\u578b - </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\u4f20\u5165prop: </span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\u6d3e\u751fstate: </span><span class="token punctuation">{</span>insideNum<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setInsideNum</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\u6539\u53d8\u6d3e\u751f\u72b6\u6001</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>\r\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token punctuation">}</span>\r\n\r\n<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Demo2</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> obj <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>insideObj<span class="token punctuation">,</span> setInsideObj<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDerivedStateFromProps</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span>\r\n      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\r\n        margin<span class="token punctuation">:</span> <span class="token string">\'20px 0\'</span><span class="token punctuation">,</span>\r\n      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\r\n    <span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">\u5f15\u7528\u7c7b\u578b - </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\u4f20\u5165prop: </span><span class="token punctuation">{</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\u6d3e\u751fstate: </span><span class="token punctuation">{</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>insideObj<span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span>\r\n        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>\r\n          <span class="token function">setInsideObj</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\r\n            id<span class="token punctuation">:</span> <span class="token number">1008</span><span class="token punctuation">,</span>\r\n          <span class="token punctuation">}</span><span class="token punctuation">)</span>\r\n        <span class="token punctuation">}</span></span>\r\n      <span class="token punctuation">></span></span><span class="token plain-text">\r\n        \u6539\u53d8\u6d3e\u751f\u72b6\u6001\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>\r\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token punctuation">}</span>\r\n\r\n<span class="token keyword">const</span> <span class="token function-variable function">useDerivedStateFromPropsDemo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>obj<span class="token punctuation">,</span> setObj<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\r\n    id<span class="token punctuation">:</span> <span class="token number">2008</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\u6539\u53d8prop</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Demo</span></span> <span class="token attr-name">num</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>hr</span> <span class="token punctuation">/></span></span><span class="token plain-text">\r\n\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span>\r\n        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span>\r\n          <span class="token function">setObj</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\r\n            id<span class="token punctuation">:</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\r\n          <span class="token punctuation">}</span><span class="token punctuation">)</span>\r\n        <span class="token punctuation">}</span></span>\r\n      <span class="token punctuation">></span></span><span class="token plain-text">\r\n        \u6539\u53d8\u5f15\u7528\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Demo2</span></span> <span class="token attr-name">obj</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>obj<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>\r\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword module">export</span> <span class="token keyword module">default</span> useDerivedStateFromPropsDemo<span class="token punctuation">;</span>\r\n\n</code></pre>',tsx:'<pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> <span class="token maybe-class-name">React</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword">import</span> <span class="token punctuation">{</span> useDerivedStateFromProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'./useDerivedStateFromProps\'</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Demo</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> num <span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>insideNum<span class="token punctuation">,</span> setInsideNum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDerivedStateFromProps</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> margin<span class="token punctuation">:</span> <span class="token string">\'20px 0\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">\u57fa\u672c\u7c7b\u578b - </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\u4f20\u5165prop: </span><span class="token punctuation">{</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\u6d3e\u751fstate: </span><span class="token punctuation">{</span>insideNum<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setInsideNum</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token property-access">random</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\u6539\u53d8\u6d3e\u751f\u72b6\u6001</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>\r\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token punctuation">}</span>\r\n\r\n<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Demo2</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> obj <span class="token punctuation">}</span><span class="token punctuation">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>insideObj<span class="token punctuation">,</span> setInsideObj<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDerivedStateFromProps</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> margin<span class="token punctuation">:</span> <span class="token string">\'20px 0\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">\u5f15\u7528\u7c7b\u578b - </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\u4f20\u5165prop: </span><span class="token punctuation">{</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\u6d3e\u751fstate: </span><span class="token punctuation">{</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation">.</span><span class="token method function property-access">stringify</span><span class="token punctuation">(</span>insideObj<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setInsideObj</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1008</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\u6539\u53d8\u6d3e\u751f\u72b6\u6001</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>\r\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token punctuation">}</span>\r\n\r\n<span class="token keyword">const</span> <span class="token function-variable function">useDerivedStateFromPropsDemo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>obj<span class="token punctuation">,</span> setObj<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">2008</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\r\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\u6539\u53d8prop</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Demo</span></span> <span class="token attr-name">num</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token builtin">number</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>hr</span> <span class="token punctuation">/></span></span><span class="token plain-text">\r\n\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">setObj</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\u6539\u53d8\u5f15\u7528</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Demo2</span></span> <span class="token attr-name">obj</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>obj<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\r\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\r\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>\r\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">export</span> <span class="token keyword">default</span> useDerivedStateFromPropsDemo<span class="token punctuation">;</span>\r\n\n</code></pre>'}},{path:"/_demos/use-derived-state-from-props.demo",dependencies:{}}),e.a.createElement(u,null)),e.a.createElement("div",{className:"markdown"},e.a.createElement("h2",{id:"api"},e.a.createElement("a",{"aria-hidden":"true",href:"#api"},e.a.createElement("span",{className:"icon icon-link"})),"API"),e.a.createElement("pre",{className:"language-ts"},e.a.createElement("code",{className:"language-ts"},e.a.createElement("span",{className:"token doc-comment comment"},"/**",e.a.createElement("br",null)," *  \u5b9e\u73b0\u7c7b\u4f3cgetDerivedStateFromProps\u7684\u6548\u679c\uff0c\u63a5\u6536prop\u5e76\u5c06\u5176\u540c\u6b65\u4e3a\u5185\u90e8\u72b6\u6001\uff0c",e.a.createElement("br",null)," *  \u5f53prop\u6539\u53d8, \u5bf9prop\u548c\u5185\u90e8state\u6267\u884c_.isEqual,\u5bf9\u6bd4\u7ed3\u679c\u4e3afalse\u65f6\uff0c\u4f1a\u66f4\u65b0\u5185\u90e8\u503c (\u57fa\u7840\u7c7b\u578b\u4f7f\u7528 === \u8fdb\u884c\u5bf9\u6bd4\uff0c\u6027\u80fd\u66f4\u9ad8\uff0c\u5f53\u5fc5\u987b\u4f7f\u7528\u5f15\u7528\u7c7b\u578b\u65f6\uff0c\u5c3d\u91cf\u4fdd\u6301\u7ed3\u6784\u7b80\u5355\uff0c\u51cf\u5c11\u5bf9\u6bd4\u6b21\u6570)",e.a.createElement("br",null)," *  ",e.a.createElement("span",{className:"token keyword"},"@param")," ",e.a.createElement("span",{className:"token parameter"},"prop")," - \u9700\u8981\u6d3e\u751f\u4e3astate\u7684prop",e.a.createElement("br",null)," *  ",e.a.createElement("span",{className:"token keyword"},"@param")," ",e.a.createElement("span",{className:"token parameter"},"customizer")," - \u53ef\u4ee5\u901a\u8fc7\u6b64\u51fd\u6570\u81ea\u5b9a\u4e49\u5bf9\u6bd4\u65b9\u5f0f, \u5982\u679c\u76f8\u7b49\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false, \u8fd4\u56deundefined\u65f6\u4f7f\u7528\u9ed8\u8ba4\u5bf9\u6bd4\u65b9\u5f0f",e.a.createElement("br",null)," * */"),e.a.createElement("br",null),e.a.createElement("span",{className:"token keyword"},"function")," useDerivedStateFromProps",e.a.createElement("span",{className:"token operator"},"<"),e.a.createElement("span",{className:"token constant"},"T"),e.a.createElement("span",{className:"token operator"},">"),e.a.createElement("span",{className:"token punctuation"},"("),e.a.createElement("br",null),"  prop",e.a.createElement("span",{className:"token punctuation"},":")," ",e.a.createElement("span",{className:"token constant"},"T"),e.a.createElement("span",{className:"token punctuation"},","),e.a.createElement("br",null),"  customizer",e.a.createElement("span",{className:"token operator"},"?"),e.a.createElement("span",{className:"token punctuation"},":")," ",e.a.createElement("span",{className:"token punctuation"},"("),e.a.createElement("span",{className:"token parameter"},"next",e.a.createElement("span",{className:"token punctuation"},":")," ",e.a.createElement("span",{className:"token constant"},"T"),e.a.createElement("span",{className:"token punctuation"},",")," prev",e.a.createElement("span",{className:"token punctuation"},":")," ",e.a.createElement("span",{className:"token constant"},"T")),e.a.createElement("span",{className:"token punctuation"},")")," ",e.a.createElement("span",{className:"token arrow operator"},"=>")," ",e.a.createElement("span",{className:"token builtin"},"boolean"),e.a.createElement("br",null),e.a.createElement("span",{className:"token punctuation"},")"),e.a.createElement("span",{className:"token punctuation"},";"),e.a.createElement("br",null)))))}},"0Owb":function(n,a,s){"use strict";function t(){return t=Object.assign||function(n){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}return n},t.apply(this,arguments)}s.d(a,"a",(function(){return t}))},JWph:function(n,a,s){"use strict";s.r(a);var t=s("tJVT"),p=s("q1tI"),e=s.n(p),o=s("hEdC"),c=s("tq0P"),u=s.n(c);function l(n,a){var s=Object(p["useState"])(n),e=Object(t["a"])(s,2),c=e[0],l=e[1];return Object(o["a"])(()=>{var s=u()(n,c,a);s||l(n)},[n]),[c,l]}function k(n){var a=n.num,s=l(a),p=Object(t["a"])(s,2),o=p[0],c=p[1];return e.a.createElement("div",{style:{margin:"20px 0"}},e.a.createElement("h3",null,"\u57fa\u672c\u7c7b\u578b - "),e.a.createElement("div",null,"\u4f20\u5165prop: ",a),e.a.createElement("div",null,"\u6d3e\u751fstate: ",o),e.a.createElement("button",{onClick:()=>c(Math.random)},"\u6539\u53d8\u6d3e\u751f\u72b6\u6001"))}function i(n){var a=n.obj,s=l(a),p=Object(t["a"])(s,2),o=p[0],c=p[1];return e.a.createElement("div",{style:{margin:"20px 0"}},e.a.createElement("h3",null,"\u5f15\u7528\u7c7b\u578b - "),e.a.createElement("div",null,"\u4f20\u5165prop: ",JSON.stringify(a,null,4)),e.a.createElement("div",null,"\u6d3e\u751fstate: ",JSON.stringify(o,null,4)),e.a.createElement("button",{onClick:()=>c({id:1008})},"\u6539\u53d8\u6d3e\u751f\u72b6\u6001"))}var r=()=>{var n=Object(p["useState"])(5),a=Object(t["a"])(n,2),s=a[0],o=a[1],c=Object(p["useState"])({id:2008}),u=Object(t["a"])(c,2),l=u[0],r=u[1];return e.a.createElement("div",null,e.a.createElement("button",{onClick:()=>o(Math.random())},"\u6539\u53d8prop"),e.a.createElement("div",null,e.a.createElement(k,{num:s})),e.a.createElement("hr",null),e.a.createElement("button",{onClick:()=>r({id:Math.random()})},"\u6539\u53d8\u5f15\u7528"),e.a.createElement("div",null,e.a.createElement(i,{obj:l})))};a["default"]=r},hEdC:function(n,a,s){"use strict";var t=s("q1tI");function p(){var n=Object(t["useRef"])(!0);return n.current?(n.current=!1,!0):n.current}var e=function(n,a){var s=p();Object(t["useEffect"])((function(){if(!s)return n()}),a)};a["a"]=e}}]);