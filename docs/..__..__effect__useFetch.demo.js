(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"2dX0":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("q1tI");function r(e,t){var n=Object(a["useRef"])(()=>{throw new Error("Cannot call function while rendering")});n.current=e;var r=Object(a["useMemo"])(()=>{var e=function(){return n.current(...arguments)};return t?t(e):e},[]),c=Object(a["useCallback"])(r,[n]);return c}},"4H9c":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("tJVT"),r=n("q1tI"),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r["useState"])(0),n=Object(a["a"])(t,2),c=n[1],o=Object(r["useState"])(e),i=Object(a["a"])(o,2),u=i[0],l=i[1],s=Object(r["useCallback"])(e=>{l(Object.assign(u,e instanceof Function?e(u):e)),c(e=>e+1)},[l]);return[u,s]}},FsCC:function(e,t,n){"use strict";n.r(t);var a=n("tJVT"),r=n("q1tI"),c=n.n(r),o=n("WmNS"),i=n.n(o),u=n("k1fw"),l=n("9og8"),s=n("K3qG"),d=n("sEfC"),v=n.n(d),f=n("DzJC"),b=n.n(f),m=n("hEdC"),O=n("W3VL"),g=n("4H9c"),h=n("xQ7e"),j=n("2dX0"),p=s["a"];function E(e){return!!e&&!!(Object(s["h"])(e)&&"nativeEvent"in e&&"target"in e&&"type"in e)}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(O["a"])({fetchID:0,fetchCount:0,timeoutTimer:0,lastFetch:Date.now()}),c=t.initData,o=t.initPayload,d=t.deps,f=void 0===d?[]:d,C=t.arg,T=t.manual,y=void 0!==T&&T,w=t.timeout,I=void 0===w?1e4:w,S=t.onSuccess,D=t.onError,k=t.onComplete,_=t.onTimeout,F=t.cacheKey,J=t.stale,x=void 0===J||J,A=t.throttleInterval,q=t.debounceInterval,H=t.pollingInterval,N=!!F,P=Object(g["a"])({loading:!y&&Object(s["f"])(e),error:void 0,timeout:!1}),M=Object(a["a"])(P,2),V=M[0],G=M[1];Object(r["useEffect"])(()=>()=>{n.fetchID=0,n.timeoutTimer&&p.clearTimeout(n.timeoutTimer)},[]);var K=Object(h["a"])("".concat(F,"_FETCH_PAYLOAD"),o,{disabled:!N}),R=Object(a["a"])(K,2),U=R[0],L=R[1],W=Object(h["a"])("".concat(F,"_FETCH_DATA"),c,{disabled:!N}),X=Object(a["a"])(W,2),Q=X[0],z=X[1],Y=Object(h["a"])("".concat(F,"_FETCH_ARG"),C,{disabled:!N}),B=Object(a["a"])(Y,2),Z=B[0],$=B[1],ee=Object(r["useState"])(!0),te=Object(a["a"])(ee,2),ne=te[0],ae=te[1];Object(m["a"])(()=>{$(C)},[C]);var re=Object(j["a"])(function(){var t=Object(l["a"])(i.a.mark((function t(a){var r,c,o,l,d,v=arguments;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]&&v[1],c=Object(s["f"])(e),c){t.next=4;break}return t.abrupt("return");case 4:return n.lastFetch=Date.now(),o=Math.random(),n.fetchID=o,n.timeoutTimer&&p.clearTimeout(n.timeoutTimer),n.timeoutTimer=p.setTimeout(()=>{ue(),null===_||void 0===_||_(),G(Object(u["a"])({},ie("timeout",!0)))},I),l=n.timeoutTimer,V.loading||G(Object(u["a"])({},ie("loading",!0))),t.prev=11,t.next=14,e(a);case 14:if(d=t.sent,o===n.fetchID){t.next=17;break}return t.abrupt("return");case 17:return G(Object(u["a"])({},ie("loading",!1))),z(d),null===S||void 0===S||S(d,r),t.abrupt("return",[void 0,d]);case 23:if(t.prev=23,t.t0=t["catch"](11),o===n.fetchID){t.next=27;break}return t.abrupt("return");case 27:return G(Object(u["a"])({},ie("error",t.t0))),null===D||void 0===D||D(t.t0),t.abrupt("return",[t.t0,void 0]);case 30:if(t.prev=30,l&&p.clearTimeout(l),o===n.fetchID){t.next=34;break}return t.abrupt("return");case 34:return null===k||void 0===k||k(),n.fetchCount++,t.finish(30);case 37:case"end":return t.stop()}}),t,null,[[11,23,30,37]])})));function a(e){return t.apply(this,arguments)}return a}(),e=>A?b()(e,A,{trailing:!1}):q?v()(e,q):e),ce=Object(j["a"])(e=>{var t=E(e)||void 0===e;return re(oe(e),t)});function oe(e){return"arg"in t?C:E(e)||void 0===e?U:(L(e),e)}function ie(e,t){var n={loading:!1,error:void 0,timeout:!1};return e&&(n[e]=t),n}function ue(){n.fetchID=0,n.timeoutTimer&&p.clearTimeout(n.timeoutTimer),G({loading:!1})}return Object(r["useEffect"])(()=>{y||(x||0!==n.fetchCount||Object(s["e"])(Q)?re(oe(),0!==n.fetchCount):G({loading:!1}))},[Z,...f]),Object(r["useEffect"])((function(){var e;return ne&&H&&H>500&&(e=p.setInterval(()=>{var e=Date.now(),t=n.lastFetch,a=e-t>=H;a&&ce()},H)),()=>{e&&clearInterval(e)}}),[H,ne]),Object(u["a"])({},V,{send:ce,data:Q,payload:U,arg:Z,setData:z,cancel:ue,polling:ne,setPolling:ae})}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return function(){for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return console.log(r,11),new Promise((a,r)=>{setTimeout(()=>{t?a(n||e):r(n||e)},e)})}}var y=()=>{var e=Object(r["useState"])(0),t=Object(a["a"])(e,2),n=t[0],o=t[1],i=C(T(1e3,!0,{name:"lxj",age:Math.random()}),{initData:{},cacheKey:"use_fetch_demo"}),u=i.send,l=i.data,s=i.payload,d=i.loading,v=i.error,f=i.timeout,b=i.cancel,m=i.arg;function O(){u(Math.random()).then(e=>{var t=Object(a["a"])(e,2),n=t[0],r=t[1];return console.log("resolve",[n,r])}).finally(()=>console.log("finally"))}return c.a.createElement("div",null,c.a.createElement("div",null,"useFetchDemo"),c.a.createElement("button",{onClick:u},"send"),c.a.createElement("button",{onClick:()=>u(Math.random())},"send by newPayload"),c.a.createElement("button",{onClick:()=>o(e=>e+1)},"change deps ",n),c.a.createElement("button",{onClick:b},"cancel"),c.a.createElement("button",{onClick:O},"sendPromise"),c.a.createElement("div",null,"data: ",JSON.stringify(l)),c.a.createElement("div",null,"payload: ",JSON.stringify(s)),c.a.createElement("div",null,"loading: ",d.toString()),c.a.createElement("div",null,"error: ",JSON.stringify(v)),c.a.createElement("div",null,"timeout: ",f.toString()),c.a.createElement("div",null,"arg: ",m))};t["default"]=y},W3VL:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("q1tI");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a["useRef"])(e);return t.current}},xQ7e:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n("tJVT"),r=n("k1fw"),c=n("K3qG"),o=n("q1tI"),i=n("2dX0"),u="USE_STORAGE_CACHE",l={local:c["a"].localStorage,session:c["a"].sessionStorage};function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"session";if(void 0!==t){var a=l[n];a&&a.setItem("".concat(u,"_").concat(e.toUpperCase()),JSON.stringify(t))}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"session",n=l[t];if(n){var a=n.getItem("".concat(u,"_").concat(e.toUpperCase()));return null===a?a:JSON.parse(a)}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"session",n=l[t];n&&n.removeItem("".concat(u,"_").concat(e.toUpperCase()))}var f={type:"session",disabled:!1};function b(e,t,n){var c=Object(r["a"])({},f,{},n),u=Object(o["useState"])(()=>{if(!c.disabled){var n=d(e,c.type);if(null!==n)return n}if(t instanceof Function){var a=t();return!c.disabled&&s(e,a,c.type),a}return!c.disabled&&s(e,t,c.type),t}),l=Object(a["a"])(u,2),v=l[0],b=l[1],m=Object(i["a"])(t=>{t instanceof Function?b(n=>{var a=t(n);return!c.disabled&&s(e,a,c.type),a}):(!c.disabled&&s(e,t,c.type),b(t))});return[v,m]}var m=Object.assign(b,{get:d,set:s,remove:v})}}]);